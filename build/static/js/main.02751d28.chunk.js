(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{33:function(t,e,a){},35:function(t,e,a){},40:function(t,e,a){"use strict";a.r(e);var n=a(4),i=a.n(n),o=a(25),s=a.n(o),r=(a(33),a(14)),c=a.n(r),u=a(18),h=a(0),l=a(3),d=a(8),b=a(1),j=a(2),p=(a(35),a(10)),f=a(6),v=function(t){Object(b.a)(a,t);var e=Object(j.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).canvas=i.a.createRef(),n}return Object(l.a)(a,[{key:"render",value:function(){return Object(f.jsx)("canvas",{width:"1000px",ref:this.canvas})}},{key:"draw",value:function(){var t=this.props.audioData,e=this.canvas.current,a=e.height,n=e.width,i=e.getContext("2d"),o=0,s=1*n/t.length;i.lineWidth=2,i.strokeSTyle="#000000",i.clearRect(0,0,n,a),i.beginPath(),i.moveTo(0,a/2);var r,c=Object(p.a)(t);try{for(c.s();!(r=c.n()).done;){var u=r.value/255*a;i.lineTo(o,u),o+=s}}catch(h){c.e(h)}finally{c.f()}i.lineTo(o,a/2),i.stroke()}},{key:"componentDidUpdate",value:function(){this.draw()}}]),a}(n.Component),y=a(29),m=function(t){Object(b.a)(a,t);var e=Object(j.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).canvas=i.a.createRef(),n}return Object(l.a)(a,[{key:"render",value:function(){var t=this.props.audioData,e=t[20]/128,a=t[500]/128,n=t[1e3]/128;return Object(f.jsxs)(y.a,{children:[Object(f.jsxs)("mesh",{position:[-2,0,0],scale:[1,e,1],children:[Object(f.jsx)("boxBufferGeometry",{attach:"geometry"}),Object(f.jsx)("meshBasicMaterial",{attach:"material",color:"red",opacity:.5,transparent:!0})]}),Object(f.jsxs)("mesh",{position:[0,0,0],scale:[1,a,1],children:[Object(f.jsx)("boxBufferGeometry",{attach:"geometry"}),Object(f.jsx)("meshBasicMaterial",{attach:"material",color:"orange",opacity:.5,transparent:!0})]}),Object(f.jsxs)("mesh",{position:[2,0,0],scale:[1,n,1],children:[Object(f.jsx)("boxBufferGeometry",{attach:"geometry"}),Object(f.jsx)("meshBasicMaterial",{attach:"material",color:"blue",opacity:.5,transparent:!0})]})]})}}]),a}(n.Component),O=function(t){Object(b.a)(a,t);var e=Object(j.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).state={audioData:new Uint8Array(0),visualiser_type:!0},n.tick=n.tick.bind(Object(d.a)(n)),n.buttonClick=n.buttonClick.bind(Object(d.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.audioContext.createAnalyser(),this.dataArray=new Uint8Array(this.analyser.frequencyBinCount),this.source=this.audioContext.createMediaStreamSource(this.props.audio),this.source.connect(this.analyser),this.rafId=requestAnimationFrame(this.tick)}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.rafId),this.analyser.disconnect(),this.source.disconnect()}},{key:"tick",value:function(){this.analyser.getByteTimeDomainData(this.dataArray),this.setState({audioData:this.dataArray}),this.rafId=requestAnimationFrame(this.tick)}},{key:"buttonClick",value:function(t){this.setState({visualiser_type:!this.state.visualiser_type})}},{key:"render",value:function(){return Object(f.jsxs)("div",{style:{height:"96vh"},children:[Object(f.jsx)("button",{onClick:this.buttonClick,className:"uk-button uk-button-default",children:" Switch "}),Object(f.jsx)("br",{}),this.state.visualiser_type?Object(f.jsx)(v,{audioData:this.state.audioData}):Object(f.jsx)(m,{audioData:this.state.audioData})]})}}]),a}(n.Component),k=function(t){Object(b.a)(a,t);var e=Object(j.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).state={audio:null},n.toggleMicrophone=n.toggleMicrophone.bind(Object(d.a)(n)),n}return Object(l.a)(a,[{key:"getMicrophone",value:function(){var t=Object(u.a)(c.a.mark((function t(){var e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 2:e=t.sent,this.setState({audio:e});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"stopMicrophone",value:function(){this.state.audio.getTracks().forEach((function(t){return t.stop()})),this.setState({audio:null})}},{key:"toggleMicrophone",value:function(){this.state.audio?this.stopMicrophone():this.getMicrophone()}},{key:"render",value:function(){return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)("div",{className:"controls",children:Object(f.jsx)("button",{className:"uk-button uk-button-default",onClick:this.toggleMicrophone,children:this.state.audio?"Stop microphone":"Get microphone input"})}),this.state.audio?Object(f.jsx)(O,{audio:this.state.audio}):""]})}}]),a}(n.Component);s.a.render(Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsx)(k,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.02751d28.chunk.js.map