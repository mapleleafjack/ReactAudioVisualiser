(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{33:function(t,e,a){},35:function(t,e,a){},40:function(t,e,a){"use strict";a.r(e);var n=a(4),i=a.n(n),o=a(25),r=a.n(o),c=(a(33),a(14)),s=a.n(c),u=a(18),h=a(0),l=a(3),d=a(8),b=a(1),j=a(2),p=(a(35),a(10)),v=a(6),f=function(t){Object(b.a)(a,t);var e=Object(j.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).canvas=i.a.createRef(),n}return Object(l.a)(a,[{key:"render",value:function(){return Object(v.jsx)("canvas",{width:"1000px",ref:this.canvas})}},{key:"draw",value:function(){var t=this.props.audioData,e=this.canvas.current,a=e.height,n=e.width,i=e.getContext("2d"),o=0,r=1*n/t.length;i.lineWidth=2,i.strokeSTyle="#000000",i.clearRect(0,0,n,a),i.beginPath(),i.moveTo(0,a/2);var c,s=Object(p.a)(t);try{for(s.s();!(c=s.n()).done;){var u=c.value/255*a;i.lineTo(o,u),o+=r}}catch(h){s.e(h)}finally{s.f()}i.lineTo(o,a/2),i.stroke()}},{key:"componentDidUpdate",value:function(){this.draw()}}]),a}(n.Component),y=a(29),O=function(t){Object(b.a)(a,t);var e=Object(j.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).canvas=i.a.createRef(),n}return Object(l.a)(a,[{key:"render",value:function(){var t=this.props.audioData;return Object(v.jsx)(y.a,{children:Object(v.jsx)(k,{audioData:t})})}}]),a}(n.Component),k=function(t){t.audioData[20];var e=t.audioData[500]/128,a=t.audioData[500]/128;return Object(v.jsxs)("mesh",{position:[0,0,0],scale:[1,e,a],children:[Object(v.jsx)("boxBufferGeometry",{attach:"geometry"}),Object(v.jsx)("meshBasicMaterial",{attach:"material",color:"blue",opacity:.5,transparent:!0})]})},m=O,x=function(t){Object(b.a)(a,t);var e=Object(j.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).state={audioData:new Uint8Array(0),visualiser_type:!0},n.tick=n.tick.bind(Object(d.a)(n)),n.buttonClick=n.buttonClick.bind(Object(d.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.audioContext.createAnalyser(),this.dataArray=new Uint8Array(this.analyser.frequencyBinCount),this.source=this.audioContext.createMediaStreamSource(this.props.audio),this.source.connect(this.analyser),this.rafId=requestAnimationFrame(this.tick)}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.rafId),this.analyser.disconnect(),this.source.disconnect()}},{key:"tick",value:function(){this.analyser.getByteTimeDomainData(this.dataArray),this.setState({audioData:this.dataArray}),this.rafId=requestAnimationFrame(this.tick)}},{key:"buttonClick",value:function(t){this.setState({visualiser_type:!this.state.visualiser_type})}},{key:"render",value:function(){return Object(v.jsxs)("div",{style:{height:"96vh"},children:[Object(v.jsx)("button",{onClick:this.buttonClick,className:"uk-button uk-button-default",children:" Switch "}),Object(v.jsx)("br",{}),this.state.visualiser_type?Object(v.jsx)(f,{audioData:this.state.audioData}):Object(v.jsx)(m,{audioData:this.state.audioData})]})}}]),a}(n.Component),g=function(t){Object(b.a)(a,t);var e=Object(j.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).state={audio:null},n.toggleMicrophone=n.toggleMicrophone.bind(Object(d.a)(n)),n}return Object(l.a)(a,[{key:"getMicrophone",value:function(){var t=Object(u.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 2:e=t.sent,this.setState({audio:e});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"stopMicrophone",value:function(){this.state.audio.getTracks().forEach((function(t){return t.stop()})),this.setState({audio:null})}},{key:"toggleMicrophone",value:function(){this.state.audio?this.stopMicrophone():this.getMicrophone()}},{key:"render",value:function(){return Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)("div",{className:"controls",children:Object(v.jsx)("button",{className:"uk-button uk-button-default",onClick:this.toggleMicrophone,children:this.state.audio?"Stop microphone":"Get microphone input"})}),this.state.audio?Object(v.jsx)(x,{audio:this.state.audio}):""]})}}]),a}(n.Component);r.a.render(Object(v.jsx)(i.a.StrictMode,{children:Object(v.jsx)(g,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.d4b14ceb.chunk.js.map